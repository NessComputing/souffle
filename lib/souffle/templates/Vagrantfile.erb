# This file is generated by Souffle (<%= version %>)

require 'mixlib/config'
require 'yajl'

class SouffleCfg
  extend Mixlib::Config

  def self.from_file(filename, parser="ruby")
    send("from_file_#{parser}".to_sym, filename)
  end

  def self.from_file_ruby(filename)
    self.instance_eval(IO.read(filename), filename, 1)
  end

  def self.from_file_json(filename)
    self.from_stream_json(IO.read(filename))
  end

  def self.from_stream_json(input)
    parser = Yajl::Parser.new(:symbolize_keys => true)
    configuration.merge!(parser.parse(input))
  end

  nodes = []
end

cfg = File.join(File.dirname(__FILE__), 'souffle.json')
SouffleCfg.from_file(cfg, "json") if File.exists? cfg

SouffleCfg[:nodes] = Array(SouffleCfg[:nodes])

Vagrant::Config.run do |config|
  SouffleCfg[:nodes].each do |node|
    config.vm_box = config[:vm_box]

    node.vm.provision :chef_solo do |chef|
    end
  end
end
